<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tourm ‚Äì Authentication</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Syne:wght@700;800;900&display=swap" rel="stylesheet" />

  <style>
    /* ============================================================
       ROOT VARIABLES
    ============================================================ */
    :root {
      --teal:        #1ABCAD;
      --teal-light:  #e8f9f7;
      --teal-glow:   rgba(26,188,173,.28);
      --teal-dark:   #0d9e90;
      --navy:        #0d1b2a;
      --navy-mid:    #1a3347;
      --slate:       #334155;
      --muted:       #94a3b8;
      --surface:     #f4f9f8;
      --white:       #ffffff;
      --border:      #dde8ec;
      --danger:      #ef4444;
      --success:     #10b981;
      --radius:      20px;
      --radius-sm:   12px;
      --shadow:      0 4px 24px rgba(13,27,42,.07);
      --shadow-lg:   0 20px 60px rgba(13,27,42,.14);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      height: 100%; font-family: 'Plus Jakarta Sans', sans-serif;
      background: var(--surface); overflow-x: hidden;
    }

    /* ============================================================
       SPLIT LAYOUT
    ============================================================ */
    .auth-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      min-height: 100vh;
    }

    /* -------- LEFT PANEL -------- */
    .auth-left {
      position: relative; overflow: hidden;
      background: linear-gradient(150deg, var(--navy) 0%, var(--navy-mid) 60%, #0a2a3d 100%);
      display: flex; flex-direction: column;
      justify-content: space-between; padding: 48px 52px;
    }

    /* Animated mesh */
    .left-mesh {
      position: absolute; inset: 0; pointer-events: none; overflow: hidden;
    }
    .mesh-circle {
      position: absolute; border-radius: 50%; filter: blur(60px);
      animation: meshFloat 9s ease-in-out infinite alternate;
    }
    .mc1 { width:380px; height:380px; background:rgba(26,188,173,.18); top:-80px; right:-80px; animation-delay:0s; }
    .mc2 { width:260px; height:260px; background:rgba(26,188,173,.10); bottom:60px; left:-60px; animation-delay:3s; }
    .mc3 { width:180px; height:180px; background:rgba(255,255,255,.04); top:45%; left:30%; animation-delay:1.5s; }

    @keyframes meshFloat {
      from { transform: translate(0,0) scale(1); }
      to   { transform: translate(24px,-18px) scale(1.07); }
    }

    /* Dot grid */
    .left-grid {
      position: absolute; inset: 0;
      background-image: radial-gradient(circle, rgba(26,188,173,.25) 1px, transparent 1px);
      background-size: 36px 36px;
      opacity: .35;
    }

    /* Floating cards */
    .left-floaters {
      position: absolute; inset: 0; pointer-events: none;
    }
    .floater {
      position: absolute; background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.1);
      backdrop-filter: blur(8px); border-radius: 16px;
      padding: 16px 20px; font-size: 13px; color: rgba(255,255,255,.75);
      animation: floaterDrift 7s ease-in-out infinite alternate;
    }
    .f1 { top: 22%; left: 6%; animation-delay:0s; }
    .f2 { top: 55%; right: 6%; animation-delay:2s; }
    .f3 { bottom: 22%; left: 10%; animation-delay:4s; }
    @keyframes floaterDrift {
      from { transform: translateY(0) rotate(0deg); }
      to   { transform: translateY(-14px) rotate(1.5deg); }
    }
    .floater .f-icon { font-size: 20px; color: var(--teal); margin-bottom: 6px; }
    .floater .f-label { font-weight: 700; font-size: 12px; color: rgba(255,255,255,.5); text-transform:uppercase; letter-spacing:.5px; margin-bottom: 2px; }
    .floater .f-val   { font-size: 14px; color: #fff; font-weight: 700; }

    /* Left content */
    .left-logo {
      position: relative; z-index: 2;
      display: flex; align-items: center; gap: 12px;
    }
    .left-logo .logo-icon {
      width: 48px; height: 48px; border-radius: 14px;
      background: linear-gradient(135deg, var(--teal), var(--teal-dark));
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 8px 24px var(--teal-glow);
    }
    .left-logo .logo-icon i { color: #fff; font-size: 22px; }
    .left-logo .logo-text { font-family: 'Syne', sans-serif; font-size: 28px; font-weight: 900; color: #fff; letter-spacing:-.5px; }
    .left-logo .logo-text span { color: var(--teal); }

    .left-hero { position: relative; z-index: 2; }
    .left-hero h2 {
      font-family: 'Syne', sans-serif; font-size: clamp(28px,3vw,40px); font-weight: 900;
      color: #fff; line-height: 1.2; margin-bottom: 16px;
    }
    .left-hero h2 em { color: var(--teal); font-style: normal; }
    .left-hero p { color: rgba(255,255,255,.55); font-size: 15px; line-height: 1.7; max-width: 340px; }

    .left-stats {
      position: relative; z-index: 2;
      display: flex; gap: 32px;
    }
    .stat-item .s-num { font-family: 'Syne', sans-serif; font-size: 28px; font-weight: 900; color: var(--teal); }
    .stat-item .s-label { font-size: 12px; color: rgba(255,255,255,.45); font-weight: 600; margin-top: 2px; }

    /* Teal divider line */
    .teal-line {
      width: 48px; height: 4px; background: linear-gradient(90deg, var(--teal), transparent);
      border-radius: 4px; margin-bottom: 20px;
    }

    /* -------- RIGHT PANEL -------- */
    .auth-right {
      display: flex; align-items: center; justify-content: center;
      padding: 40px 24px; background: var(--surface);
      position: relative; overflow: hidden;
    }
    .auth-right::before {
      content: '';
      position: absolute; top: -120px; right: -120px;
      width: 350px; height: 350px; border-radius: 50%;
      background: radial-gradient(circle, rgba(26,188,173,.07), transparent);
    }

    .auth-box {
      width: 100%; max-width: 440px;
      position: relative; z-index: 1;
    }

    /* ============================================================
       PAGE SWITCHING
    ============================================================ */
    .auth-page {
      display: none;
      animation: pageIn .45s cubic-bezier(.4,0,.2,1) both;
    }
    .auth-page.active { display: block; }
    @keyframes pageIn {
      from { opacity:0; transform: translateY(22px); }
      to   { opacity:1; transform: translateY(0); }
    }

    /* ============================================================
       FORM ELEMENTS
    ============================================================ */
    .form-heading { margin-bottom: 34px; }
    .form-heading .fh-badge {
      display: inline-flex; align-items: center; gap: 7px;
      background: var(--teal-light); color: var(--teal-dark);
      font-size: 12px; font-weight: 700; border-radius: 40px;
      padding: 6px 14px; margin-bottom: 14px;
      border: 1px solid rgba(26,188,173,.2);
    }
    .form-heading h1 {
      font-family: 'Syne', sans-serif; font-size: 30px; font-weight: 900;
      color: var(--navy); margin-bottom: 7px; line-height: 1.2;
    }
    .form-heading p { color: var(--muted); font-size: 14px; line-height: 1.6; }

    /* FIELD */
    .field { margin-bottom: 20px; }
    .field label {
      display: flex; align-items: center; gap: 7px;
      font-size: 12.5px; font-weight: 700; color: var(--slate);
      margin-bottom: 8px;
    }
    .field label i { color: var(--teal); font-size: 13px; }

    .input-wrap { position: relative; }
    .input-wrap .i-pre,
    .input-wrap .i-suf {
      position: absolute; top: 50%; transform: translateY(-50%);
      font-size: 16px; pointer-events: none; transition: color .2s;
    }
    .input-wrap .i-pre { left: 16px; color: var(--muted); }
    .input-wrap .i-suf { right: 14px; color: var(--muted); cursor: pointer; pointer-events: all; }
    .input-wrap .i-suf:hover { color: var(--teal); }

    .input-wrap input {
      width: 100%;
      background: var(--white);
      border: 1.8px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 14px 42px 14px 46px;
      font-size: 14px; font-family: 'Plus Jakarta Sans', sans-serif;
      color: var(--navy);
      transition: all .25s ease;
      outline: none;
    }
    .input-wrap input::placeholder { color: #b8c9d3; }
    .input-wrap input:focus {
      border-color: var(--teal);
      box-shadow: 0 0 0 4px rgba(26,188,173,.12);
      background: #fff;
    }
    .input-wrap input.error  { border-color: var(--danger); box-shadow: 0 0 0 4px rgba(239,68,68,.1); }
    .input-wrap input.valid  { border-color: var(--success); }

    .field-error-msg {
      font-size: 11.5px; color: var(--danger); margin-top: 6px;
      display: flex; align-items: center; gap: 5px;
    }

    /* OTP inputs */
    .otp-group {
      display: flex; gap: 10px; justify-content: center; margin: 24px 0;
    }
    .otp-group input {
      width: 52px; height: 58px; text-align: center;
      font-size: 22px; font-weight: 800; font-family: 'Syne', sans-serif;
      border: 1.8px solid var(--border); border-radius: var(--radius-sm);
      background: var(--white); color: var(--navy);
      outline: none; transition: all .22s;
      -moz-appearance: textfield;
    }
    .otp-group input::-webkit-outer-spin-button,
    .otp-group input::-webkit-inner-spin-button { -webkit-appearance: none; }
    .otp-group input:focus {
      border-color: var(--teal);
      box-shadow: 0 0 0 4px rgba(26,188,173,.14);
      transform: scale(1.06);
    }
    .otp-group input.filled {
      border-color: var(--teal); background: var(--teal-light);
    }

    /* PW STRENGTH */
    .pw-strength-bar { display:flex; gap:5px; margin-top:8px; }
    .pw-bar { flex:1; height:4px; border-radius:4px; background:var(--border); transition:background .3s; }
    .pw-bar.w { background:#ef4444; }
    .pw-bar.m { background:#f59e0b; }
    .pw-bar.s { background:#10b981; }
    .pw-label { font-size:11.5px; margin-top:5px; }

    /* PASSWORD RULES */
    .pw-rules { margin-top:12px; display:flex; flex-direction:column; gap:6px; }
    .pw-rule {
      display:flex; align-items:center; gap:8px;
      font-size:12.5px; color:var(--muted); transition:color .22s;
    }
    .pw-rule .rule-dot {
      width:6px; height:6px; border-radius:50%;
      background:var(--border); transition:background .22s; flex-shrink:0;
    }
    .pw-rule.pass { color:var(--success); }
    .pw-rule.pass .rule-dot { background:var(--success); }

    /* SUBMIT BUTTON */
    .btn-auth {
      width: 100%; padding: 15px;
      background: linear-gradient(135deg, var(--teal) 0%, var(--teal-dark) 100%);
      border: none; border-radius: 40px;
      font-size: 15px; font-weight: 800;
      font-family: 'Plus Jakarta Sans', sans-serif;
      color: #fff; cursor: pointer; letter-spacing: .3px;
      box-shadow: 0 10px 30px var(--teal-glow);
      transition: all .28s ease;
      display: flex; align-items: center; justify-content: center; gap: 9px;
      position: relative; overflow: hidden;
    }
    .btn-auth::after {
      content: '';
      position: absolute; inset: 0;
      background: linear-gradient(135deg, rgba(255,255,255,.12), transparent);
      opacity: 0; transition: opacity .25s;
    }
    .btn-auth:hover { transform: translateY(-2px); box-shadow: 0 14px 40px var(--teal-glow); }
    .btn-auth:hover::after { opacity: 1; }
    .btn-auth:active { transform: translateY(0); }
    .btn-auth.loading { pointer-events:none; opacity:.8; }
    .btn-auth .btn-spinner {
      width:18px; height:18px; border:2.5px solid rgba(255,255,255,.3);
      border-top-color:#fff; border-radius:50%; animation:spin .7s linear infinite;
      display:none;
    }
    .btn-auth.loading .btn-spinner { display:block; }
    .btn-auth.loading .btn-text { display:none; }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* SOCIAL LOGIN */
    .social-btns { display:flex; gap:12px; margin-bottom:24px; }
    .social-btn {
      flex:1; padding:12px; border:1.8px solid var(--border);
      border-radius: var(--radius-sm); background:var(--white);
      cursor:pointer; font-size:13px; font-weight:700; color:var(--slate);
      display:flex; align-items:center; justify-content:center; gap:8px;
      font-family:'Plus Jakarta Sans',sans-serif;
      transition:all .22s;
    }
    .social-btn:hover { border-color:var(--teal); color:var(--teal); transform:translateY(-1px); box-shadow:var(--shadow); }
    .social-btn img { width:18px; height:18px; }

    /* DIVIDER */
    .auth-divider {
      display:flex; align-items:center; gap:14px; margin:20px 0;
    }
    .auth-divider hr { flex:1; border-color:var(--border); }
    .auth-divider span { font-size:12px; font-weight:700; color:var(--muted); }

    /* BOTTOM LINK */
    .auth-link { text-align:center; margin-top:24px; font-size:13.5px; color:var(--muted); }
    .auth-link a { color:var(--teal); font-weight:700; text-decoration:none; }
    .auth-link a:hover { text-decoration:underline; }

    /* REMEMBER / FORGOT */
    .row-between {
      display:flex; align-items:center; justify-content:space-between;
      margin-bottom:20px;
    }
    .check-wrap {
      display:flex; align-items:center; gap:8px; cursor:pointer;
    }
    .check-wrap input[type="checkbox"] { display:none; }
    .check-box {
      width:18px; height:18px; border-radius:5px;
      border:1.8px solid var(--border); background:var(--white);
      display:flex; align-items:center; justify-content:center;
      transition:all .2s;
    }
    .check-wrap input:checked ~ .check-box { background:var(--teal); border-color:var(--teal); }
    .check-wrap input:checked ~ .check-box::after { content:'‚úì'; font-size:11px; font-weight:800; color:#fff; }
    .check-wrap span { font-size:13px; color:var(--slate); font-weight:600; }
    .forgot-link { font-size:13px; color:var(--teal); font-weight:700; text-decoration:none; cursor:pointer; }
    .forgot-link:hover { text-decoration:underline; }

    /* SUCCESS BADGE */
    .success-pill {
      display:flex; align-items:center; gap:12px;
      background:rgba(16,185,129,.1); border:1.5px solid rgba(16,185,129,.25);
      border-radius:14px; padding:16px 18px; margin-bottom:20px;
    }
    .success-pill .sp-icon {
      width:36px; height:36px; border-radius:50%;
      background:var(--success); display:flex; align-items:center; justify-content:center;
      color:#fff; font-size:16px; flex-shrink:0;
    }
    .success-pill p { font-size:13px; color:#065f46; margin:0; line-height:1.5; }

    /* BACK ARROW */
    .back-btn {
      display:inline-flex; align-items:center; gap:8px;
      font-size:13px; font-weight:700; color:var(--muted);
      cursor:pointer; margin-bottom:28px; transition:color .2s;
      background:none; border:none; font-family:inherit; padding:0;
    }
    .back-btn:hover { color:var(--teal); }
    .back-btn i { transition:transform .2s; }
    .back-btn:hover i { transform:translateX(-3px); }

    /* TYPE TOGGLE (login) */
    .type-toggle {
      display:flex; gap:0; border:1.8px solid var(--border);
      border-radius:40px; padding:4px; margin-bottom:28px;
      background:var(--white);
    }
    .type-toggle button {
      flex:1; padding:9px 16px; border:none; border-radius:35px;
      font-size:13px; font-weight:700; font-family:inherit;
      color:var(--muted); background:transparent; cursor:pointer;
      transition:all .25s; display:flex; align-items:center; justify-content:center; gap:6px;
    }
    .type-toggle button.active {
      background:linear-gradient(135deg,var(--teal),var(--teal-dark));
      color:#fff; box-shadow:0 4px 14px var(--teal-glow);
    }

    /* EMAIL SENT ILLUSTRATION */
    .email-sent-icon {
      width:90px; height:90px; border-radius:24px;
      background:linear-gradient(135deg,var(--teal-light),rgba(26,188,173,.2));
      display:flex; align-items:center; justify-content:center;
      font-size:40px; color:var(--teal); margin:0 auto 24px;
      box-shadow: 0 12px 36px rgba(26,188,173,.2);
      animation: iconPop .6s cubic-bezier(.34,1.56,.64,1) both .1s;
    }
    @keyframes iconPop { from{transform:scale(0);opacity:0;} to{transform:scale(1);opacity:1;} }

    /* RESEND TIMER */
    .resend-row { text-align:center; margin-top:16px; font-size:13px; color:var(--muted); }
    .resend-row a { color:var(--teal); font-weight:700; cursor:pointer; text-decoration:none; }
    .resend-row a:hover { text-decoration:underline; }
    #resendTimer { font-weight:700; color:var(--teal); }

    /* STRENGTH CIRCLE */
    .strength-summary {
      display:flex; align-items:center; gap:10px; margin-top:10px;
      font-size:12.5px;
    }
    .strength-summary .dot { width:8px; height:8px; border-radius:50%; background:var(--border); }

    /* Toast */
    .toast-wrap {
      position:fixed; bottom:28px; right:28px; z-index:9999;
      display:flex; flex-direction:column; gap:10px;
    }
    .toast-msg {
      background:var(--navy); color:#fff; border-radius:14px;
      padding:14px 20px; font-size:13.5px; font-weight:600;
      display:flex; align-items:center; gap:10px;
      box-shadow:var(--shadow-lg);
      animation:toastIn .35s cubic-bezier(.34,1.56,.64,1);
    }
    .toast-msg i { color:var(--teal); font-size:18px; }
    @keyframes toastIn { from{opacity:0;transform:translateY(14px) scale(.95);} to{opacity:1;transform:none;} }

    /* ============================================================
       RESPONSIVE
    ============================================================ */
    @media (max-width: 900px) {
      .auth-layout { grid-template-columns: 1fr; }
      .auth-left { display: none; }
      .auth-right { padding: 32px 20px; }
    }
    @media (max-width: 480px) {
      .form-heading h1 { font-size: 24px; }
      .otp-group input { width:44px; height:52px; font-size:19px; }
      .social-btns { flex-direction:column; }
    }

    /* ============================================================
       MISC
    ============================================================ */
    a { text-decoration: none; }
    ::selection { background:rgba(26,188,173,.2); }

    /* Animated underline for links */
    .u-link {
      position:relative; color:var(--teal); font-weight:700; cursor:pointer;
    }
    .u-link::after {
      content:''; position:absolute; bottom:-2px; left:0; right:0;
      height:2px; background:var(--teal); transform:scaleX(0);
      transform-origin:left; transition:transform .22s;
    }
    .u-link:hover::after { transform:scaleX(1); }

    /* Pulse ring for submit button on success state */
    .btn-success-state {
      background: linear-gradient(135deg, var(--success), #0da876) !important;
      box-shadow: 0 10px 30px rgba(16,185,129,.35) !important;
    }
  </style>
</head>
<body>

<!-- ================================================================
     LAYOUT
================================================================ -->
<div class="auth-layout">

  <!-- ==================== LEFT PANEL ==================== -->
  <div class="auth-left">
    <div class="left-mesh">
      <div class="mesh-circle mc1"></div>
      <div class="mesh-circle mc2"></div>
      <div class="mesh-circle mc3"></div>
    </div>
    <div class="left-grid"></div>
    <div class="left-floaters">
      <div class="floater f1">
        <div class="f-icon"><i class="bi bi-star-fill"></i></div>
        <div class="f-label">Traveler Rating</div>
        <div class="f-val">4.9 / 5.0 ‚≠ê</div>
      </div>
      <div class="floater f2">
        <div class="f-icon"><i class="bi bi-shield-fill-check"></i></div>
        <div class="f-label">Verified Listings</div>
        <div class="f-val">12,400+</div>
      </div>
      <div class="floater f3">
        <div class="f-icon"><i class="bi bi-globe-americas"></i></div>
        <div class="f-label">Countries Covered</div>
        <div class="f-val">195 Nations</div>
      </div>
    </div>

    <!-- Logo -->
    <div class="left-logo">
      <div class="logo-icon"><i class="bi bi-compass"></i></div>
      <div class="logo-text">Tour<span>m</span></div>
    </div>

    <!-- Hero text -->
    <div class="left-hero">
      <div class="teal-line"></div>
      <h2 id="leftTitle">Welcome back to your <em>adventure hub.</em></h2>
      <p id="leftSub">Sign in to access thousands of tours, trusted guides, and unforgettable destinations ‚Äî all in one place.</p>
    </div>

    <!-- Stats -->
    <div class="left-stats">
      <div class="stat-item">
        <div class="s-num">50k+</div>
        <div class="s-label">Happy Travelers</div>
      </div>
      <div class="stat-item">
        <div class="s-num">8k+</div>
        <div class="s-label">Tour Packages</div>
      </div>
      <div class="stat-item">
        <div class="s-num">195</div>
        <div class="s-label">Countries</div>
      </div>
    </div>
  </div>

  <!-- ==================== RIGHT PANEL ==================== -->
  <div class="auth-right">
    <div class="auth-box">

      <!-- ================================================
           PAGE: LOGIN
      ================================================ -->
      <div class="auth-page active" id="page-login">
        <div class="form-heading">
          <div class="fh-badge"><i class="bi bi-compass"></i> Tourm Account</div>
          <h1>Sign In</h1>
          <p>Don't have an account? <a class="u-link" href="registration-form.html">Create one free</a></p>
        </div>

        <!-- Account type toggle -->
        <div class="type-toggle">
          <button class="active" id="loginAsBuyer" onclick="setLoginType('buyer')">
            <i class="bi bi-person-heart"></i> Buyer
          </button>
          <button id="loginAsBusiness" onclick="setLoginType('business')">
            <i class="bi bi-briefcase"></i> Business
          </button>
        </div>

        <!-- Social -->
        <div class="social-btns">
          <button class="social-btn" onclick="showToast('Google sign-in coming soon!','bi-google')">
            <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18z"/><path fill="#FBBC05" d="M3.964 10.706A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.706V4.962H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.038l3.007-2.332z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.962L3.964 7.294C4.672 5.163 6.656 3.58 9 3.58z"/></svg>
            Google
          </button>
          <button class="social-btn" onclick="showToast('Facebook sign-in coming soon!','bi-facebook')">
            <i class="bi bi-facebook" style="color:#1877f2;font-size:17px"></i> Facebook
          </button>
        </div>

        <div class="auth-divider"><hr><span>or sign in with email</span><hr></div>

        <!-- Email -->
        <div class="field">
          <label><i class="bi bi-envelope-fill"></i> Email Address</label>
          <div class="input-wrap">
            <i class="bi bi-envelope i-pre"></i>
            <input type="email" id="loginEmail" placeholder="you@example.com" oninput="liveValidate('loginEmail','email')">
          </div>
          <div class="field-error-msg" id="err-loginEmail" style="display:none"><i class="bi bi-exclamation-circle"></i> Enter a valid email</div>
        </div>

        <!-- Password -->
        <div class="field">
          <label><i class="bi bi-lock-fill"></i> Password</label>
          <div class="input-wrap">
            <i class="bi bi-lock i-pre"></i>
            <input type="password" id="loginPassword" placeholder="Your password">
            <i class="bi bi-eye i-suf" onclick="toggleVis('loginPassword',this)"></i>
          </div>
        </div>

        <!-- Remember / Forgot -->
        <div class="row-between">
          <label class="check-wrap">
            <input type="checkbox" id="rememberMe">
            <div class="check-box"></div>
            <span>Remember me</span>
          </label>
          <a class="forgot-link" onclick="showPage('forgot')">Forgot password?</a>
        </div>

        <!-- Submit -->
        <button class="btn-auth" id="loginBtn" onclick="handleLogin()">
          <div class="btn-spinner"></div>
          <span class="btn-text"><i class="bi bi-box-arrow-in-right"></i> Sign In</span>
        </button>

        <div class="auth-link" style="margin-top:20px">
          New to Tourm? <a href="registration-form.html">Create an account</a>
        </div>
      </div><!-- /page-login -->


      <!-- ================================================
           PAGE: FORGOT PASSWORD
      ================================================ -->
      <div class="auth-page" id="page-forgot">
        <button class="back-btn" onclick="showPage('login')"><i class="bi bi-arrow-left"></i> Back to Sign In</button>

        <!-- Before send -->
        <div id="forgot-form-view">
          <div class="form-heading">
            <div class="fh-badge"><i class="bi bi-key"></i> Password Recovery</div>
            <h1>Forgot Password?</h1>
            <p>No worries! Enter your registered email and we'll send you a 6-digit OTP to reset your password.</p>
          </div>

          <div class="field">
            <label><i class="bi bi-envelope-fill"></i> Registered Email</label>
            <div class="input-wrap">
              <i class="bi bi-envelope i-pre"></i>
              <input type="email" id="forgotEmail" placeholder="you@example.com" oninput="liveValidate('forgotEmail','email')">
            </div>
            <div class="field-error-msg" id="err-forgotEmail" style="display:none"><i class="bi bi-exclamation-circle"></i> Enter a valid email</div>
          </div>

          <button class="btn-auth" id="forgotBtn" onclick="handleForgot()">
            <div class="btn-spinner"></div>
            <span class="btn-text"><i class="bi bi-send"></i> Send OTP</span>
          </button>

          <div class="auth-link">Remember your password? <a class="u-link" onclick="showPage('login')">Sign in</a></div>
        </div>

        <!-- After send: OTP view -->
        <div id="forgot-otp-view" style="display:none">
          <div style="text-align:center">
            <div class="email-sent-icon"><i class="bi bi-envelope-check"></i></div>
          </div>
          <div class="form-heading" style="text-align:center">
            <div class="fh-badge" style="display:inline-flex"><i class="bi bi-shield-lock"></i> OTP Sent</div>
            <h1>Check Your Email</h1>
            <p>We've sent a 6-digit code to <strong id="sentEmailDisplay" style="color:var(--teal)">you@email.com</strong>. Enter it below to continue.</p>
          </div>

          <div class="otp-group" id="otpGroup">
            <input type="number" maxlength="1" class="otp-inp" oninput="handleOtp(this,0)" onkeydown="otpKeydown(event,0)">
            <input type="number" maxlength="1" class="otp-inp" oninput="handleOtp(this,1)" onkeydown="otpKeydown(event,1)">
            <input type="number" maxlength="1" class="otp-inp" oninput="handleOtp(this,2)" onkeydown="otpKeydown(event,2)">
            <input type="number" maxlength="1" class="otp-inp" oninput="handleOtp(this,3)" onkeydown="otpKeydown(event,3)">
            <input type="number" maxlength="1" class="otp-inp" oninput="handleOtp(this,4)" onkeydown="otpKeydown(event,4)">
            <input type="number" maxlength="1" class="otp-inp" oninput="handleOtp(this,5)" onkeydown="otpKeydown(event,5)">
          </div>
          <div class="field-error-msg" id="err-otp" style="display:none;justify-content:center"><i class="bi bi-exclamation-circle"></i> Please enter all 6 digits</div>

          <button class="btn-auth" id="verifyOtpBtn" onclick="handleVerifyOtp()">
            <div class="btn-spinner"></div>
            <span class="btn-text"><i class="bi bi-check2-circle"></i> Verify Code</span>
          </button>

          <div class="resend-row">
            Didn't receive the code? 
            <a id="resendLink" onclick="startResendTimer()" style="display:none">Resend OTP</a>
            <span id="resendTimer"></span>
          </div>
        </div>
      </div><!-- /page-forgot -->


      <!-- ================================================
           PAGE: RESET PASSWORD
      ================================================ -->
      <div class="auth-page" id="page-reset">
        <button class="back-btn" onclick="showPage('forgot')"><i class="bi bi-arrow-left"></i> Back</button>

        <div class="form-heading">
          <div class="fh-badge"><i class="bi bi-lock-fill"></i> New Password</div>
          <h1>Reset Password</h1>
          <p>Create a strong, unique password for your Tourm account.</p>
        </div>

        <div class="field">
          <label><i class="bi bi-lock-fill"></i> New Password</label>
          <div class="input-wrap">
            <i class="bi bi-lock i-pre"></i>
            <input type="password" id="newPassword" placeholder="Min 8 characters" oninput="checkPwStrength(this.value)">
            <i class="bi bi-eye i-suf" onclick="toggleVis('newPassword',this)"></i>
          </div>
          <div class="pw-strength-bar">
            <div class="pw-bar" id="rb1"></div>
            <div class="pw-bar" id="rb2"></div>
            <div class="pw-bar" id="rb3"></div>
            <div class="pw-bar" id="rb4"></div>
          </div>
          <div class="pw-label" id="resetPwLabel" style="color:var(--muted);font-size:11.5px">Enter a password</div>
          <!-- Rules -->
          <div class="pw-rules">
            <div class="pw-rule" id="rule-len">  <div class="rule-dot"></div> At least 8 characters</div>
            <div class="pw-rule" id="rule-upper"><div class="rule-dot"></div> One uppercase letter (A‚ÄìZ)</div>
            <div class="pw-rule" id="rule-num">  <div class="rule-dot"></div> One number (0‚Äì9)</div>
            <div class="pw-rule" id="rule-sym">  <div class="rule-dot"></div> One special character (!@#$‚Ä¶)</div>
          </div>
        </div>

        <div class="field" style="margin-top:20px">
          <label><i class="bi bi-lock-fill"></i> Confirm New Password</label>
          <div class="input-wrap">
            <i class="bi bi-lock i-pre"></i>
            <input type="password" id="confirmNewPassword" placeholder="Re-enter new password">
            <i class="bi bi-eye i-suf" onclick="toggleVis('confirmNewPassword',this)"></i>
          </div>
          <div class="field-error-msg" id="err-confirmNew" style="display:none"><i class="bi bi-exclamation-circle"></i> Passwords do not match</div>
        </div>

        <button class="btn-auth" id="resetBtn" onclick="handleReset()" style="margin-top:8px">
          <div class="btn-spinner"></div>
          <span class="btn-text"><i class="bi bi-check2-all"></i> Reset Password</span>
        </button>
      </div><!-- /page-reset -->

    </div><!-- /auth-box -->
  </div><!-- /auth-right -->
</div><!-- /auth-layout -->

<!-- TOAST CONTAINER -->
<div class="toast-wrap" id="toastWrap"></div>

<!-- ================================================================
     JAVASCRIPT
================================================================ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
<script>
/* ============================================================
   PAGE ROUTING
============================================================ */
const LEFT_META = {
  login:  { title:'Welcome back to your <em>adventure hub.</em>', sub:'Sign in to access thousands of tours, trusted guides, and unforgettable destinations ‚Äî all in one place.' },
  forgot: { title:'Password <em>recovery</em> made simple.', sub:'Securely recover access to your Tourm account in under 2 minutes.' },
  reset:  { title:'Almost there ‚Äî set your <em>new password.</em>', sub:'Choose a strong password to keep your Tourm account safe and secure.' },
};

function showPage(name) {
  document.querySelectorAll('.auth-page').forEach(p => p.classList.remove('active'));
  const target = document.getElementById('page-' + name);
  if (target) target.classList.add('active');
  const meta = LEFT_META[name] || LEFT_META.login;
  document.getElementById('leftTitle').innerHTML = meta.title;
  document.getElementById('leftSub').textContent  = meta.sub;
}

/* ============================================================
   LOGIN TYPE TOGGLE
============================================================ */
function setLoginType(type) {
  document.getElementById('loginAsBuyer').classList.toggle('active', type==='buyer');
  document.getElementById('loginAsBusiness').classList.toggle('active', type==='business');
}

/* ============================================================
   LIVE VALIDATION
============================================================ */
function liveValidate(id, type) {
  const inp = document.getElementById(id);
  const err = document.getElementById('err-'+id);
  const val = inp.value.trim();
  let ok = true;
  if (type==='email') ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(val);
  inp.classList.toggle('error', !ok && val.length > 0);
  inp.classList.toggle('valid', ok && val.length > 0);
  if (err) err.style.display = (!ok && val.length > 2) ? 'flex' : 'none';
}

/* ============================================================
   PASSWORD VISIBILITY
============================================================ */
function toggleVis(id, iconEl) {
  const inp = document.getElementById(id);
  const show = inp.type==='password';
  inp.type = show ? 'text' : 'password';
  iconEl.className = (show ? 'bi bi-eye-slash' : 'bi bi-eye') + ' i-suf';
}

/* ============================================================
   BUTTON LOADING STATE
============================================================ */
function setLoading(btnId, state) {
  const btn = document.getElementById(btnId);
  btn.classList.toggle('loading', state);
}

/* ============================================================
   TOAST
============================================================ */
function showToast(msg, icon='bi-info-circle') {
  const wrap = document.getElementById('toastWrap');
  const t = document.createElement('div');
  t.className = 'toast-msg';
  t.innerHTML = `<i class="bi ${icon}"></i>${msg}`;
  wrap.appendChild(t);
  setTimeout(() => { t.style.opacity='0'; t.style.transition='opacity .3s'; setTimeout(()=>t.remove(),350); }, 3000);
}

/* ============================================================
   LOGIN HANDLER
============================================================ */
function handleLogin() {
  const email = document.getElementById('loginEmail').value.trim();
  const pw    = document.getElementById('loginPassword').value;
  const errEl = document.getElementById('err-loginEmail');

  // Basic validation
  if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
    document.getElementById('loginEmail').classList.add('error');
    errEl.style.display = 'flex'; return;
  }
  if (!pw) {
    document.getElementById('loginPassword').classList.add('error');
    showToast('Please enter your password.','bi-exclamation-circle'); return;
  }

  setLoading('loginBtn', true);
  setTimeout(() => {
    setLoading('loginBtn', false);
    // Simulate success
    const btn = document.getElementById('loginBtn');
    btn.classList.add('btn-success-state');
    btn.innerHTML = '<i class="bi bi-check2-circle"></i> Signed In!';
    showToast('Welcome back! Redirecting‚Ä¶','bi-check-circle');
    setTimeout(() => {
      btn.classList.remove('btn-success-state');
      btn.innerHTML = '<div class="btn-spinner"></div><span class="btn-text"><i class="bi bi-box-arrow-in-right"></i> Sign In</span>';
    }, 3000);
  }, 1800);
}

/* ============================================================
   FORGOT PASSWORD HANDLER
============================================================ */
function handleForgot() {
  const email = document.getElementById('forgotEmail').value.trim();
  const errEl = document.getElementById('err-forgotEmail');

  if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
    document.getElementById('forgotEmail').classList.add('error');
    errEl.style.display = 'flex'; return;
  }

  setLoading('forgotBtn', true);
  setTimeout(() => {
    setLoading('forgotBtn', false);
    document.getElementById('sentEmailDisplay').textContent = email;
    document.getElementById('forgot-form-view').style.display = 'none';
    document.getElementById('forgot-otp-view').style.display  = 'block';
    startResendTimer();
    // Focus first OTP input
    setTimeout(() => document.querySelectorAll('.otp-inp')[0].focus(), 100);
    showToast('OTP sent to '+email,'bi-envelope-check');
  }, 1600);
}

/* ============================================================
   OTP HANDLING
============================================================ */
function handleOtp(inp, idx) {
  const inputs = document.querySelectorAll('.otp-inp');
  const val = inp.value.toString();
  if (val.length > 1) inp.value = val[val.length-1];
  inp.classList.toggle('filled', inp.value !== '');
  if (inp.value && idx < 5) inputs[idx+1].focus();
}

function otpKeydown(e, idx) {
  const inputs = document.querySelectorAll('.otp-inp');
  if (e.key === 'Backspace' && !inputs[idx].value && idx > 0) {
    inputs[idx-1].focus();
    inputs[idx-1].value = '';
    inputs[idx-1].classList.remove('filled');
  }
}

function handleVerifyOtp() {
  const inputs  = document.querySelectorAll('.otp-inp');
  const errEl   = document.getElementById('err-otp');
  const otpCode = Array.from(inputs).map(i=>i.value).join('');

  if (otpCode.length < 6) {
    errEl.style.display = 'flex'; return;
  }
  errEl.style.display = 'none';
  setLoading('verifyOtpBtn', true);

  setTimeout(() => {
    setLoading('verifyOtpBtn', false);
    showToast('OTP verified! Set your new password.','bi-shield-check');
    showPage('reset');
  }, 1500);
}

/* ============================================================
   RESEND TIMER
============================================================ */
let resendInterval = null;
function startResendTimer() {
  clearInterval(resendInterval);
  let secs = 60;
  const timerEl = document.getElementById('resendTimer');
  const linkEl  = document.getElementById('resendLink');
  linkEl.style.display = 'none';
  timerEl.textContent  = `Resend in ${secs}s`;

  resendInterval = setInterval(() => {
    secs--;
    timerEl.textContent = secs > 0 ? `Resend in ${secs}s` : '';
    if (secs <= 0) {
      clearInterval(resendInterval);
      timerEl.textContent = '';
      linkEl.style.display = 'inline';
    }
  }, 1000);
}

/* ============================================================
   PASSWORD STRENGTH (RESET PAGE)
============================================================ */
function checkPwStrength(val) {
  const bars  = ['rb1','rb2','rb3','rb4'].map(id => document.getElementById(id));
  const label = document.getElementById('resetPwLabel');
  bars.forEach(b => { b.className='pw-bar'; });

  const rules = {
    len:   val.length >= 8,
    upper: /[A-Z]/.test(val),
    num:   /[0-9]/.test(val),
    sym:   /[^A-Za-z0-9]/.test(val),
  };
  // Update rule indicators
  Object.entries(rules).forEach(([key,pass]) => {
    const el = document.getElementById('rule-'+key);
    if (el) el.classList.toggle('pass', pass);
  });

  const score = Object.values(rules).filter(Boolean).length;
  if (!val) { label.textContent='Enter a password'; label.style.color='var(--muted)'; return; }
  const cls  = score <= 1 ? 'w' : score <= 3 ? 'm' : 's';
  const text = score <= 1 ? 'üî¥ Weak' : score <= 2 ? 'üü° Fair' : score <= 3 ? 'üü° Good' : 'üü¢ Strong';
  for (let i=0;i<score;i++) bars[i].classList.add(cls);
  label.textContent = text;
  label.style.color = cls==='w' ? '#ef4444' : cls==='m' ? '#f59e0b' : '#10b981';
}

/* ============================================================
   RESET PASSWORD HANDLER
============================================================ */
function handleReset() {
  const pw  = document.getElementById('newPassword').value;
  const cpw = document.getElementById('confirmNewPassword').value;
  const errEl = document.getElementById('err-confirmNew');

  if (pw.length < 8) { showToast('Password must be at least 8 characters.','bi-exclamation-circle'); return; }
  if (pw !== cpw) { errEl.style.display='flex'; document.getElementById('confirmNewPassword').classList.add('error'); return; }
  errEl.style.display='none';

  setLoading('resetBtn', true);
  setTimeout(() => {
    setLoading('resetBtn', false);
    const btn = document.getElementById('resetBtn');
    btn.classList.add('btn-success-state');
    btn.innerHTML = '<i class="bi bi-check2-circle"></i> Password Reset!';
    showToast('Password reset successful! Redirecting to login‚Ä¶','bi-check-circle');
    setTimeout(() => {
      btn.classList.remove('btn-success-state');
      btn.innerHTML = '<div class="btn-spinner"></div><span class="btn-text"><i class="bi bi-check2-all"></i> Reset Password</span>';
      // Reset OTP view for next use
      document.getElementById('forgot-form-view').style.display = 'block';
      document.getElementById('forgot-otp-view').style.display  = 'none';
      document.querySelectorAll('.otp-inp').forEach(i => { i.value=''; i.classList.remove('filled'); });
      showPage('login');
    }, 2500);
  }, 1800);
}

/* ============================================================
   PASTE HANDLER FOR OTP
============================================================ */
document.addEventListener('DOMContentLoaded', () => {
  const otpInputs = document.querySelectorAll('.otp-inp');
  otpInputs[0]?.addEventListener('paste', e => {
    e.preventDefault();
    const data = (e.clipboardData || window.clipboardData).getData('text').replace(/\D/g,'');
    [...data.substring(0,6)].forEach((ch, i) => {
      if (otpInputs[i]) {
        otpInputs[i].value = ch;
        otpInputs[i].classList.add('filled');
      }
    });
    otpInputs[Math.min(data.length, 5)].focus();
  });

  // Remember me: restore
  const rem = localStorage.getItem('tourm_remember');
  if (rem) {
    document.getElementById('loginEmail').value = rem;
    document.getElementById('rememberMe').checked = true;
  }
  document.getElementById('rememberMe').addEventListener('change', function() {
    if (this.checked) localStorage.setItem('tourm_remember', document.getElementById('loginEmail').value);
    else localStorage.removeItem('tourm_remember');
  });
});
</script>
</body>
</html>
